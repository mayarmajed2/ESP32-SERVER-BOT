# دليل تجربة مشروع ESP32 Server Bot

## المتطلبات الأساسية

### الأجهزة المطلوبة
- لوحة ESP32
- وحدة قارئ بطاقة SD متصلة بـ ESP32
- بطاقة SD مهيأة بنظام FAT32
- كابل USB للبرمجة والتغذية

### البرامج المطلوبة
- Arduino IDE
- المكتبات التالية:
  - WebServer
  - SD
  - SPI
  - WiFi
  - ArduinoJson
  - WiFiClientSecure
  - UniversalTelegramBot
  - time

## خطوات الإعداد

### 1. إعداد بوت تليجرام
1. افتح تطبيق تليجرام وابحث عن `@BotFather`
2. أرسل الأمر `/newbot` لإنشاء بوت جديد
3. اتبع التعليمات لتحديد اسم البوت واسم المستخدم الخاص به
4. احتفظ برمز الوصول (BOT_TOKEN) الذي سيظهر لك
5. أرسل رسالة إلى البوت الخاص بك للبدء في المحادثة
6. استخدم `@userinfobot` للحصول على معرف المحادثة (CHAT_ID)

### 2. تعديل ملف التكوين
1. افتح ملف `config.h`
2. قم بتعديل البيانات التالية:
   ```cpp
   // WiFi credentials
   const char* ssid = "اسم_شبكة_الواي_فاي";
   const char* password = "كلمة_مرور_الواي_فاي";

   // Telegram bot settings
   #define BOT_TOKEN "رمز_البوت_الخاص_بك"
   #define CHAT_ID "معرف_المحادثة_الخاص_بك"

### 3. إعداد بطاقة SD
1. قم بتهيئة بطاقة SD بنظام FAT32
2. قم بإنشاء الملفات التالية على بطاقة SD (ستكون فارغة في البداية):
   - /users.json
   - /tasks.json
   - /notifications.json
   - /reset_tokens.json
3. قم بإنشاء مجلد /html وضع فيه ملفات واجهة المستخدم HTML

### 4. توصيل الأجهزة

1. قم بتوصيل وحدة قارئ بطاقة SD بـ ESP32 (الدبوس الافتراضي هو 5)
2. تأكد من توصيل الطاقة والأرضي بشكل صحيح
3. قم بتوصيل ESP32 بالكمبيوتر عبر كابل USB

## تحميل البرنامج

1. افتح Arduino IDE
2. قم بتثبيت مكتبات ESP32 من خلال مدير اللوحات
3. قم بتثبيت جميع المكتبات المطلوبة من خلال مدير المكتبات
4. افتح مشروع ESP32-SERVER-BOT
5. اختر نوع اللوحة ESP32 من قائمة الأدوات
6. اختر المنفذ المناسب
7. اضغط على زر التحميل
8. انتظر حتى اكتمال التحميل

## اختبار النظام

### 1. التحقق من الاتصال

1. افتح وحدة التحكم التسلسلية (Serial Monitor) بسرعة 115200
2. تحقق من رسائل الاتصال بشبكة WiFi
3. انتظر حتى ترى رسالة "Connected to WiFi, IP address: x.x.x.x"
4. تحقق من رسالة "HTTP server started"
5. تأكد من وصول رسالة بدء التشغيل إلى بوت التليجرام الخاص بك

### 2. اختبار واجهة الويب

1. افتح متصفح ويب على جهاز متصل بنفس شبكة WiFi
2. أدخل عنوان IP الخاص بـ ESP32 في شريط العنوان
3. يجب أن ترى صفحة تسجيل الدخول

### 3. اختبار التسجيل وتسجيل الدخول

1. انتقل إلى صفحة التسجيل وأنشئ حسابًا جديدًا
2. تحقق من وصول إشعار التسجيل إلى بوت التليجرام
3. قم بتسجيل الدخول باستخدام الحساب الذي أنشأته
4. تحقق من وصول إشعار تسجيل الدخول إلى بوت التليجرام

### 4. اختبار جدولة المهام

1. بعد تسجيل الدخول، انتقل إلى صفحة جدولة المهام
2. أنشئ مهمة جديدة مع تحديد وقت قريب من الوقت الحالي
3. انتظر حتى يحين وقت تنفيذ المهمة
4. تحقق من تنفيذ المهمة وإرسال إشعار إلى بوت التليجرام

### 5. اختبار إعادة تعيين كلمة المرور

1. انتقل إلى صفحة نسيت كلمة المرور
2. أدخل البريد الإلكتروني المسجل
3. تحقق من وصول رابط إعادة تعيين كلمة المرور إلى بوت التليجرام
4. انقر على الرابط وأدخل كلمة مرور جديدة
5. تحقق من إمكانية تسجيل الدخول باستخدام كلمة المرور الجديدة

## استكشاف الأخطاء وإصلاحها

### مشاكل الاتصال بشبكة WiFi

- تأكد من صحة اسم الشبكة وكلمة المرور في ملف config.h
- تأكد من أن الشبكة متاحة وقوية بما يكفي

### مشاكل بطاقة SD

- تأكد من توصيل بطاقة SD بشكل صحيح
- تحقق من تهيئة البطاقة بنظام FAT32
- تأكد من إنشاء الملفات المطلوبة على البطاقة

### مشاكل بوت التليجرام

- تحقق من صحة رمز البوت ومعرف المحادثة
- تأكد من أنك بدأت محادثة مع البوت
- تحقق من اتصال ESP32 بالإنترنت

### مشاكل عامة

- أعد تشغيل ESP32
- تحقق من رسائل الخطأ في وحدة التحكم التسلسلية
- تأكد من تثبيت جميع المكتبات المطلوبة